<!DOCTYPE html>
<html lang="ko" xmlns:th="https://www.thymeleaf.org">
<head>
    <th:block th:replace="~{fragments/frag_head :: HeadFragment}"></th:block>
</head>
<body class="d-flex flex-column">
<main class="flex-shrink-0">
    <!-- Navigation-->
    <th:block th:replace="~{fragments/frag_nav :: NavFragment(userId=${userId})}"></th:block>
    <!-- Page content-->
    <section class="py-5">
        <div class="container px-4">
            <div class="row gx-5 justify-content-center">
                <div class="col-lg-11 col-xl-9 col-xxl-8">
                    <div class="card shadow border-0 rounded-4 mb-5 p-3">
                        <!-- Contact form-->
                        <div class="rounded-4 py-5 px-4 px-md-5">
                            <div class="text-center mb-5">
                                <h1 class="display-5 fw-bolder mb-0"><span class="text-gradient d-inline"><a href="/pages/index">EmoSync</a></span></h1>
                                <h3 class="fw-bolder">비밀번호 찾기</h3>
                                <p class="lead fw-normal text-muted mb-0"></p>
                            </div>
                            <div class="row gx-5 justify-content-center">
                                <div class="row justify-content-center text-danger mb-3 text-center">
                                    <i class="bi bi-info-circle-fill">비밀번호를 찾고자 하는 아이디를 입력해 주세요</i>
                                </div>
                                <div class="col-lg-8 col-xl-8">
                                    <form name="find_password_form" action="/members/req_find_pw_IdAuth" method="post" onsubmit="return checkField()">
                                        <div class="form-floating mb-3">
                                            <input class="form-control" id="userId" name="id" type="text" maxlength="12" placeholder="" required/>
                                            <label for="userId">아이디 입력</label>
                                        </div>
                                        <div class="d-flex align-items-center justify-content-between mt-4 mb-0">
                                            <button class="btn btn-primary col-8 mx-auto" type="submit">다음으로</button>
                                        </div>
                                        <div class="form-check mt-3 text-center">
                                            <a class="small a_tag_style" href="/members/login">로그인</a>
                                            <span> | </span>
                                            <a class="small a_tag_style" href="/members/find_id">아이디 찾기</a>
                                        </div>
                                    </form>
                                    <div class="card-footer bg-white text-center py-3" style="border: none;">
                                        <div class="small"><a class="a_tag_style" href="/members/register">아직 회원이 아니라면 회원가입</a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>
<!-- Footer 영역 fragment -->
<th:block th:replace="~{fragments/frag_footer :: FooterFragment}"></th:block>
<!-- script 영역 fragment -->
<th:block th:replace="~{fragments/frag_script :: ScriptFragment}"></th:block>
<script>
    // 데이터 전송 전 검사
    function checkField(){
        const userId = $('#userId');

        // 빈칸 검사
        if(userId.val() === "" || userId.val() == null || (typeof userId.val() == "object" && !Object.keys(userId.val()).length)){
            alert("ID를 입력하세요.");
            userId.css('border-color','red');
            userId.focus();
            return false;
        }

        // 정규식 검사
        const idRegex = /^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]{4,12}$/;
        if(!idRegex.test(userId.val())){
            alert("ID 형식이 올바르지 않습니다.");
            userId.css('border-color','red');
            userId.focus();
            return false;
        }
        return true;
    }
</script>
</body>
</html>